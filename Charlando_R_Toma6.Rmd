---
title: "Charlando_R_Toma6"
author: "Priscilla Minotti"
date: "6/14/2020"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

```

## El paquete **_tidyverse_**

En inglés se usa el adjetivo _tidy_  para señalar que algo esta ordenado, o sea estructurado de una cierta manera.
El paquete _tidyverse_ ayuda a trabajar de manera ordenada con los datos. 
 _tidyverse_ está compuesto por muchos paquetes distintos, cada uno con funciones especiales para ayudar a ordenar y analizar datos de manera ordenada. 

Cargamos ahora _tidyverse_ y vemos qué paquetes trae:

```{r tidyverse}
library(tidyverse)
```

## Datos ordenados

Cuando hablamos de datos en tablas, estos datos están ordenados, _tidy data_, si y sólo si:

- Cada variable debe tener su propia columna.
- Cada observación debe tener su propia fila.
- Cada valor debe tener su propia celda.

![tidy](./tidy-1.svg)


## Tibbles

Para las tablas _tidyverse_ usa **_tibble_** que es un dataframe ordenado.
Miremos el dataset _iris_ que viene con R y descubramos sus particularidades:

```{r iris}
iris
```

Si unimos con lo anterior,  
- cada dataset a usar dentro de un mismo análisis debe estar en su propia tibble.

## El paquete _readr_

- Lee archivos de texto planos formateados de distinta manera (hay que ver separador de columnas y decimales)
- deduce el tipo de dato de cada columna y lo imprime
- Devuelve siempre una tibble
- Tiene funciones especiales para resolver problemas de codificación

##  Importando datos tabulares segun su delimitador

Vamos a importar el dataset  terremotos.cvs pero antes lo miramos para ver como estan separados los decimales y las columnas.

Si las columnas estan delimitadas con ","  y los decimales con  ".",  usamos `read_csv`

```{r cvs}
T1 <- read_csv("terremotos.csv")
```
Vemos como entraron los datos
```{r T1}
T1
```

## Funciones para leer achivos
- read_csv()      columnas con , decimal con .
- read_csv2()     columnas con ; decimal con ,
- read_delim()    columnas con delimitador personalizado, ej delim = "|"

```{r csv2}
T2 <- read_csv2("terremotos2.csv")
```

```{r T2}
T2
```

```{r delim}
T3 <- read_delim("Terremotos3.txt", delim = "|")
```
```{r T3}
T3
```
## Perlitas

- skip = n           saltea n lineas antes de empezar a leer
- n_max = n          solo lee n filas
- col_names = FALSE  le pone nombres de columna genericos a las filas
- na = "."           si donde no tenemos datos hay un . rellena el valor con NA

## Funciones para escribir archivos planos

Son similares a las de leer 

- write_csv()
- write_csv2()
- write_delim()

```{r}
write_delim(T3, "Terremotos3.txt", delim = "|", na = "NA", append = FALSE)
```





